head	1.2;
access;
symbols
	cvs-200501160850:1.1.1.1
	prone-for-deletion:1.1
	start:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2005.01.03.15.07.00;	author tg;	state dead;
branches;
next	1.1;

1.1
date	2004.12.12.21.35.10;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.12.12.21.35.10;	author tg;	state Exp;
branches;
next	;


desc
@@


1.2
log
@remove some orphanes:
- stuff which was (wrongly) contained within the -bopenbsd import,
  because it happened to have existed earlier in openbsd
- stuff which was (correctly) contained within the -bopenbsd
  import, and we removed in -bmirbsd
@
text
@<?xml version="1.0" encoding="iso-2022-jp"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
  <head>

    <title>Microsoft Windows での Apache のコンパイル</title>

  </head>
  <!-- Background white, links blue (unvisited), navy (visited), red (active) -->
  <!-- English revision: 1.16 -->
  <body bgcolor="#FFFFFF" text="#000000" link="#0000FF"
  vlink="#000080" alink="#FF0000">
        <div align="CENTER">
      <img src="images/sub.gif" alt="[APACHE DOCUMENTATION]" /> 

      <h3>Apache HTTP Server</h3>
    </div>



    <h1 align="center">Microsoft Windows での Apache のコンパイル</h1>

    <p>Apache のコンパイルを始めるにあたって、多くの重要なポイントがあります。
    始める前に、<a href="windows.html">Microsoft Windows での Apache
    の使用</a>を見てくだ世気ぁ鹿霈

腫樵鞜竏をコンパイルするには Microsoft Visual C++ 5.0
    または 6.0 が適誓擇縫ぅ鵐好函璽襪気譴討い襪海箸廚任后
ビルドはコマンドラインツール、または Visual Studio
    環境で可能です。インストールの方法は、VC++
    のマニュアルを参考にしてくだ世気ぁ灰泪鵐疋薀ぅ鵑任離咼襯
ぢ例えば nmake の使用)では、コマンドラインツールの準備に Program
    Files/DevStudio/VC/bin フォルダ世砲△笆癇鶻荻矚及び Platform
    SDK の setenv.bat のファイルが必要になるであろうことについて、
    特に注意してくだ世気ぁ浴諷肅跂蜴ぢや Visual Studio IDE の
    InstallBin プロジェクトを使って Apache をインストールする場合は、
    awk ユーティリティも必要になります。Visual Studio 7.0 (.net)
    を使う場合は、Apache.dsw を読み込み .msproj
    フォーマットに変換してくだ世気ぁ廛蹈献Д肇侫．ぅ齔に変更があった場合は Apache.dsw
    を一から変換し直さなければなりません。</p>

    <p>まず、IDE を使うつもりならパスが通り、DevStudio
    環境が解釈できるところに awk.exe をインストールしてくだ世気ぁ
怏鈔阯で利用可能な awk は様々なバージョンがあります。
    一番インストールしやすいものは Brian Kernighan の <a
    href="http://cm.bell-labs.com/cm/cs/who/bwk/"
    >http://cm.bell-labs.com/cm/cs/who/bwk/</a> サイトから入手可能です。
    このサイトから <a href="http://cm.bell-labs.com/cm/cs/who/bwk/awk95.exe"
    >http://cm.bell-labs.com/cm/cs/who/bwk/awk95.exe</a>
    をダ瀬Ε鵐蹇璽匹靴疹豺腓蓮癡觜貴纔を awk.exe
    という名前で保存しなければなりません。</p>

    <p>Developer Studio IDE はツール (<u>T</u>) メニューのオプション
    (<u>O</u>) 以下の、ディレクトリタブ (Developer Studio 7.0 では
    Projects - VC++ Directories)
    の実行可能ファイルにリストされた場所にある場合にのみ、awk.exe
    を見つけられることに注意してくだ世気ぁＩ廚鳳検癡覡纔へのパスをこのリスト、システムの環境変数 PATH に追加してくだ世気ぁ鹿霈

腫ぢそれから、適誓擇淵妊譽肇蠅鞜竏の配布を展開してくだ世気ぁ
コマンドプロンプトを開き、Apache 配布サブディレクトリ
    <code>src</code> に移動してくだ世気鹿霈

腫昭竢粤祥瘠繙蛹絎郤閼緇ぢファイルには Apache の makefile
    の元となる指示が含まれています。WindowsNT で Apache
    をコンパイルするには、単に以下のコマンドのうちの一つを使ってくだ世気鹿霈

受貍
殊蘊若閼緇鉈瘠瘠繙蛹絎焉鞜竏纈鹿竢粤ぢリリースビルド)</li>

      <li><code>nmake /f Makefile.win _apached</code>
      (デバッグビルド)</li>
    </ul>

    <p>これらはどちらも Apache をコンパイルします。
     後者では、出力されたファイルにデバッグ情報が含まれ、
     バグを見つけたり問題を追誓廚靴燭蠅靴笋垢覆蠅泙后鹿霈

腫ぢもし、「...として認識されていません」
    のようなエラーが出た場合はまず、vcvars32.bat を実行する必要があります。
    以下のコマンドを入力してくだ世気鹿霈
腫鱚禳榻鳫苒瘢蛹纉楪纐囈蜿榜畜醍釟崔崛厶害癆
鹿頏緇

腫嘗このコマンドは VC がインストールされたディレクトリに合わせて
    調誓阿垢詆廚△蠅泙后
腫蕉蜩谷貴ユーザで、かつ、最近のプラットフォーム SDK
    をインストールしている場合は、以下のコマンドを入力する必要があるでしょう
    (Platform SDK アップデートがインストールされているディレクトリに合わせて
    調誓阿垢詆廚△蠅泙腫鱚≪載會閾鱇鍋跂黠俾癆肬鴉痛樮都杜岻汰國
鹿頏緇

腫ぢそれから、再び nmake コマンドを試してくだ世気ぁ鹿霈

腫ぢサポートされたすべての mod_isapi 機能を有効にするには Windows
    Platform SDK の更新が必要になることに<strong>注意してくだ世気鹿齡鳫鈑ぢ。
    Microsoft Visual C++ 5.0 とともに配布された SDK ファイルは古いために
    使えません。
    最近のアップデートがなされていない場合、Apache は MSVC++ 5.0 では、
    mod_isapi 機能がいくつか使用不可になることを警告します。
    アップデートに関しては <a
    href="http://msdn.microsoft.com/platformsdk/"
    >http://msdn.micro soft.com/platformsdk/</a> で探してくだ世気ぁ鹿霈

腫樵鞜竏は、VC++ の Visual Studio 開発環境を使ってコンパイル
    することもできます。このプロセスを簡素化するために、Visual Studio
    workspace (Apache.dsw) が <code>src</code> フォルダ世砲い
提供されています。
    この workspace は、完全な Apache のバイナリリリースに必要な .dsp
    プロジェクトの全体のリストが書かれています。
    また、それらが適誓擇塀臀妊咼襯匹気譴襪茲Δ砲垢襪燭瓩法
プロジェクトの間の依存関係も含まれています。
    InstallBin が、他のすべてのプロジェクトをビルドし、
    コンパイルされたファイルを適誓擇憤銘屬縫ぅ鵐好函璽襪垢襦
トップレベルのプロジェクトです。</p>

    <p>これらの .dsp プロジェクトファイルは Visual C++ 6.0
    のフォーマットで配布されます。Visual C++ 5.0(97) は
    唯一の例外、デバッグシンボル用のフラグである /ZI
    フラグを除いてこのフォーマットを認識します。
    VC 5.0 では /Zi フラグがこれに相当します。
    Visual Studio 5.0 (97) の .dsp ファイルをすぐに準備するには、
    <code>src\helpers</code> フォルダ世砲毒柯曚気譴討い纈スクリプトを使うことができます</p>
<pre>
  cd src\helpers
  cvstodsp5.pl
</pre>

    <p>このコマンドは、Perl インタプリタがインストールされていて、
    .pl のファイルタイプが登録されていると仮定します。変換された .dsp
    プロジェクトファイルのリストはそれらが変換されるにつれて表示されていきます。
    改訂されたプロジェクトファイルを提供するパッチを寄与するときは、
    Visual Studio6.0 フォーマットにプロジェクトを戻すスクリプト
    dsp5tocvs.pl によってそれらを変換してくだ世気ぁ鹿霈

腫樵鞜竏絎糂及び makefile.win によりビルドされるコアの .dsp
    プロジェクトは以下の通りです</p>

    <ul>
      <li><code>os\win32\ApacheOS.dsp</code></li>
      <li><code>os\win32\Win9xConHook.dsp</code></li>
      <li><code>regex\regex.dsp</code></li>
      <li><code>ap\ap.dsp</code></li>
      <li><code>lib\expat-lite\xmltok.dsp</code></li>
      <li><code>lib\expat-lite\xmlparse.dsp <em>xmltok が必要</em></code></li>
      <li><code>lib\sdbm.dsp</code></li>
      <li><code>main\gen_uri_delims.dsp</code></li>
      <li><code>main\gen_test_char.dsp</code></li>
      <li><code>ApacheCore.dsp <em>以上全てが必要</em></code></li>
      <li><code>Apache.dsp <em>ApacheCore が必要</em></code></li>
    </ul>

    <p>さらに <code>os\win32</code> サブディレクトリには、
       オプションのモジュールすべてのプロジェクトファイルが含まれます。
       これらはすべて ApacheCore を必要とします。
    </p>

    <ul>
      <li><code>os\win32\mod_auth_anon.dsp</code></li>
      <li><code>os\win32\mod_auth_dbm.dsp <em>sdbm も必要</em></code></li>
      <li><code>os\win32\mod_auth_digest.dsp</code></li>
      <li><code>os\win32\mod_cern_meta.dsp</code></li>
      <li><code>os\win32\mod_digest.dsp</code></li>
      <li><code>os\win32\mod_expires.dsp</code></li>
      <li><code>os\win32\mod_headers.dsp</code></li>
      <li><code>os\win32\mod_info.dsp</code></li>
      <li><code>os\win32\mod_mime_magic.dsp</code></li>
      <li><code>os\win32\mod_proxy.dsp</code></li>
      <li><code>os\win32\mod_rewrite.dsp</code></li>
      <li><code>os\win32\mod_speling.dsp</code></li>
      <li><code>os\win32\mod_status.dsp</code></li>
      <li><code>os\win32\mod_unique_id.dsp</code></li>
      <li><code>os\win32\mod_usertrack.dsp</code></li>
      <li><code>os\win32\mod_vhost_alias.dsp</code></li>
    </ul>

    <p><code>support\</code> フォルダ世蓮草痺蒹
ランタイムの一部ではないけれども、パスワードとログファイルを
    管理するために、管理者により使用される追加のプログラムの
    プロジェクトファイルが含まれます。</p>

    <ul>
      <li><code>support\htdigest.dsp</code></li>
      <li><code>support\htpasswd.dsp</code></li>
      <li><code>support\logresolve.dsp</code></li>
      <li><code>support\rotatelogs.dsp</code></li>
    </ul>

    <p>Apache がコンパイルできたらサーバルートディレクトリにインストール
    する必要があります。デフォルトは現在のハードディスクのディレクトリ
    <code>\Apache</code> です。</p>

    <p>自動的に <code>c:\ServerRoot</code>
    にファイルをインストールするには、以下の nmake
    コマンド(上部参照)のどちらかを使ってくだ世気ぁ鹿霈

受貍
殊蘊若閼緇鉈瘠瘠繙蛹絎蜴齡瘡跼
瀕嘖追匳弱躱禳樮纈鰔闖躱鹿竢粤ぢリリース版ビルド用)
      </li>
      <li><code>nmake /f Makefile.win installd
      INSTDIR=<em>c:\ServerRoot</em></code> (デバッグ版ビルド用)</li>
    </ul>

    <p>INSTDIR への<em>c:\ServerRoot</em>
    引数がインストールディレクトリを指定します (Apache を <samp>\Apache</samp>
    にインストールする場合は省略可)。</p>

    <p>これにより以下がインストールされます</p>

    <ul>
      <li><code><em>c:\ServerRoot</em>\Apache.exe</code> - Apache
      プログラム</li>
      <li><code><em>c:\ServerRoot</em>\ApacheCore.dll</code> -
      Apache ランタイム [共有ライブラリ]</li>
      <li><code><em>c:\ServerRoot</em>\Win9xConHook.dll</code> -
      Win9x console fixups [共有ライブラリ]</li>
      <li><code><em>c:\ServerRoot</em>\xmlparse.dll</code> - XML
      パーサ [共有ライブラリ]</li>
      <li><code><em>c:\ServerRoot</em>\xmltok.dll</code> - XML
      トークンエンジン [共有ライブラリ]</li>
      <li><code><em>c:\ServerRoot</em>\bin\*.exe</code> -
      管理用プログラム</li>
      <li><code><em>c:\ServerRoot</em>\cgi-bin</code> - CGI
      スクリプトの例</li>
      <li><code><em>c:\ServerRoot</em>\conf</code> - 誓瀋螢侫．ぅ
ディレクトリ</li>
      <li><code><em>c:\ServerRoot</em>\icons</code> - FancyIndexing
      用のアイコン</li>
      <li><code><em>c:\ServerRoot</em>\include\*.h</code> - Apache
      ヘッダ瀬侫．ぅ鹿跚殊蘊若閼緇弱躱禳樮纈鰔闖躱樊閭鷦閼緇ぢようこそ、の
      index.html ページ</li>
      <li><code><em>c:\ServerRoot</em>\htdocs\manual</code> -
      Apache ドキュメント</li>
      <li><code><em>c:\ServerRoot</em>\lib</code> - 誓電薀ぅ屮薀
鹿跚殊蘊若閼緇弱躱禳樮纈鰔闖躱樓蛯纔繝鹿竢粤動的ライブラリ
      </li>
      <li><code><em>c:\ServerRoot</em>\logs</code> - 空のログディレクトリ
      </li>
      <li><code><em>c:\ServerRoot</em>\modules\mod_*.dll</code> -
      ロード可能な Apache モジュール</li>
    </ul>

    <p>もし nmake を持っていないか、違うディレクトリにインストール
    したい場合は、必ず同様の命名体系を使ってくだ世気ぁ鹿霈

腫ぢプロセスの簡素化のためすべてのプロジェクトの間の依存関係は
    Microsoft Visual Studio workspace ファイルにおいて定義されています</p>
<pre>
   src/Apache.dsw
</pre>

    <p>これは、より低位のソースは Visual Studio
    内で再ビルドされることを保証します。最上位のプロジェクトは InstallBin
    であり、Makefile.win を実行してコンパイルされた実行ファイルと dll
    を移動します。InstallBin の、「誓瀋蝓廚蕁◆岼貳漫廛織屬砲△襦
「コマンドライン」エントリで INSTDIR= を変更することができます。
    InstallBin.dsp プロジェクト内のデフォルトは、src ツリーから
    1 階層上 (..) です。InstallBin 誓瀋蠅鮟だ正し、
    INSTDIR= を目的のディレクトリへと編集してくだ世気ぁ
鹿霈
取

取瘡蜃扈杜堙劬樵鞜竏挽墅纈鮗馨
釈鱚羹〓昭蜊齟秉∫轣艱鶩蜴粤芍罌踉就侮粤昭
鹿硼糯鹿蔗迪

窺跫隻鉗瘡纐蜩蜿
誓


窺窺窺跫隻逅闥矚黼鞳鄲喞辮闢蜚闥閹蜥腕笆鷓氾祖

誓
