head	1.2;
access;
symbols
	cvs-200507211800:1.1.1.1
	tg-mergetmp-3:1.1.1.1
	cvs-200504170300:1.1.1.1
	start:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2005.03.06.15.45.53;	author tg;	state dead;
branches;
next	1.1;

1.1
date	2005.02.05.17.30.32;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.05.17.30.32;	author tg;	state Exp;
branches;
next	;


desc
@@


1.2
log
@the usual "let's remove a shitload of files"
but less than last time, to reduce maintenance effort
@
text
@<?xml version="1.0" encoding="iso-2022-jp"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
  <head>

    <title>Compiling and Installing Apache</title>

  </head>
  <!-- English revision: 1.40 -->
  <!-- Background white, links blue (unvisited), navy (visited), red (active) -->
  <body bgcolor="#ffffff" text="#000000" link="#0000ff" vlink="#000080"
  alink="#ff0000">
        <div align="CENTER">
      <img src="images/sub.gif" alt="[APACHE DOCUMENTATION]" /> 

      <h3>Apache HTTP Server</h3>
    </div>



    <h1 align="center">Apache 1.3 のコンパイル・インストール</h1>

    <ul>
      <li><a href="#download">Apache のダ瀬Ε鵐蹇璽鹿畩鹿跚殊蘊釈鱚羹■蜴錢ぢ導入</a></li>
      <li><a href="#apaci">APACI を使った Apache 1.3 HTTP サーバのインストール</a></li>
      <ul>
          <li><a href="#requirements">必要なシステム</a></li>
          <li><a href="#configure">ソースツリーの誓瀋鹿畩鹿跚殊蘊釈鱚羹■碯蛹笄ぢパッケージのビルド</a></li>
          <li><a href="#installing">パッケージのインストール</a></li>
      </ul>
      <li><a href="#traditional">伝統的な方法によるビルドとインストール</a></li>
      <ul>
            <li><a href="#trad_configure">インストールの誓瀋鹿畩鹿跚殊蘊釈鱚羹■痲焜闕韈跂⊂草痺蒹ぢのコンパイル</a></li>
            <li><a href="#trad_install">Apache のインストール</a></li>
      </ul>
      <li><a href="#testing">パッケージのテスト</a></li>
      <li><a href="#time">誓気靴ぅ轡好謄犹屬寮設定</a></li>
    </ul>

    <p>この文書は Apache を Unix システム上で、コンパイル及びインストール
    するためのものです。それ以外のプラットホーム上でのコンパイル及び
    インストールについては、以下の項目を参照してくだ世気ぁ鹿霈
受貍
殊蘊釈鱚羹†蜴粹譬祥蜒鳫齒胄蜴粹ぢ上での Apacheの使用</a></li>
      <li><a href="cygwin.html">Cygwin 上での Apache の使用</a></li>
      <li><a href="netware.html">Novell Netware 上での Apache の使用</a></li>
      <li><a href="mpeix.html">HP MPE/iX 上での Apache の使用</a></li>
      <li><a href="unixware.html">UnixWare 上での Apache のコンパイル</a></li>
      <li><a href="readme-tpf.html">Apache の TPF Port の概要</a>
      </li>
    </ul>

    <h2><a id="download" name="download">Apache のダ瀬Ε鵐蹇璽鹿畩鹿莢
腫樵鞜竏の最新版は <a
    href="http://httpd.apache.org/download.cgi">Download Page</a>
    から直誓椒誓ウンロードすることが出来ます。</p>

    <h2><a id="intro" name="intro">導入</a></h2>

    <p>すべての良い物と同様、Apache を誓瀋蝓▲灰鵐僖ぅ襦▲ぅ鵐好函璽
する方法は二つあります。以下で誓睫誓する APACI プロセスを使った
    3分インストール、または &apos;src/INSTALL&apos; ファイルで誓睫誓されている、
    以前のバージョンの Apache と同じ機構を選択することが出来ます。
    それぞれに利点世鳩臈誓があります。- APACI はより新しく、
    少し熟誓気譴討い泙擦鵑修譴鉾颪笋校屬郎脳造悩僂澆泙后
対して、&quot;Configuration.tmpl&quot;
    の機構を使った従来の方法はパワーユーザにとってはより柔斉陲飽靴Δ海箸侏茲泙后
我々は、それぞれのやり方に対する意見やフィードバックには大変興味があります
    </p>

    <h2><a id="apaci" name="apaci">APACI を使った Apache 1.3 HTTP
    サーバのインストール</a></h2>

    <h3>Overview for the impatient</h3>
<pre>
     $ ./configure --prefix=PREFIX
     $ make
     $ make install
     $ PREFIX/bin/apachectl start
</pre>

    <p><b>注意:</b> <code>PREFIX</code> は &quot;PREFIX&quot;
    という文字列ではありません。代わりに Apache をインストールしたい
    Unix のファイルシステム上のパスを使います。たとえば上の PREFIX
    の部分には &quot;<code>/usr/local/apache</code>&quot; が入ります。</p>

    <h3><a id="requirements" name="requirements">必要なシステム</a></h3>
    <p>Apache のビルドには以下に挙げるものが必要になります</p>

    <dl>
      <dt><b>ディスクスペース</b></dt>

      <dd>約 12 MB のディスクスペースが一時的に必要になることを確認してくだ世気ぁ
インストール後には約 3 MB のディスクスペースが必要になります。
      (実際に必要になディスクスペースは組み込まれたサードパーティーの
      モジュール等に依ります)。</dd>

      <dt><b>ANSI-C コンパイラ</b></dt>

      <dd>ANSI-C コンパイラがインストールされていることを確認してくだ世気ぁ
汝繞閹癇楠籬闔酉透ぢによる GNU C コンパイラ (GCC)
      を推奨します(バージョン 2.7.2 で大丈夫)。GCC を持っていない場合は
      ベンダ世砲茲襯灰鵐僖ぅ蕕把禪林互換であることを確認してくだ世気ぁ
芭のホームページは http://www.gnu.org/ に、GCC 配布は
      http://www.gnu.org/order/ftp.html から見つけることが出来ます。</dd>

      <dt><b>Perl 5 インタプリタ [オプション]</b></dt>

      <dd>`apxs' や `dbmmanage' のような(Perl で書かれた)
      サポートスクリプトの中には Perl 5 インタプリタ (バージョン 5.003
      または 5.004 が望ましい) が必要なものがあります。APACI の
      `configure' スクリプトにそのようなインタプリタが見つからなかった場合、
      害にはなりません。当然、Apache 1.3 をビルド及びインストール
      することができます。もし、複数の Perl インタプリタがインストール
      されている場合 (恐らくはベンダ世砲茲纈と自分で導入した Perl 5)、
      --with-perl オプション (以下参照) を使って誓気靴い發里鯀鬚仭檀
に知らせてやることを推奨します。</dd>

      <dt><b>動的共有オブジェクト (DSO) サポート [オプション]</b></dt>

      <dd>
        <p>現在、最大限の柔斉霎性のために Apache は dlopen()/dlsym()
        システムコールを利用した DSO 機構を経由させたランタイムにより、
        モジュールをロードすることが出来ます。これらのシステムコールはすべての
        OS で有効なわけではないのでどのプラットホームでも DSO
        機構を使えるとは限りません。シェアードオブジェクトのコンパイルは
        非常にプラットフォームに依存したものであるため、Apache は現時点世任
いくつかのプラットフォームに関してのみその方法を知っています。
        現在の状況はこのようになります。</p>

        <ul>
          <li>
            サポートされているプラットフォーム: 

            <p>
            <table border="0">
              <tr>
                <td>Linux</td>
                <td>SunOS</td>
                <td>UnixWare</td>
                <td>Darwin/Mac OS</td>
              </tr>
              <tr>
                <td>FreeBSD</td>
                <td>Solaris</td>
                <td>AIX</td>
                <td>OpenStep/Mach</td>
              </tr>
              <tr>
                <td>OpenBSD</td>
                <td>IRIX</td>
                <td>SCO</td>
                <td>DYNIX/ptx</td>
              </tr>
              <tr>
                <td>NetBSD</td>
                <td>HPUX</td>
                <td>ReliantUNIX</td>
                <td>BSDI</td>
              </tr>
              <tr>
                <td>Digital Unix</td>
                <td>DGUX</td>
              </tr>
            </table>
            </p>
          </li>

          <li>
            完全にサポート外のプラットフォーム:

            <p>Ultrix</p>
          </li>
        </ul>

        <p>あなたのシステムがこのリストにないけれど、dlopen
        形式のインタフェースがある場合、適誓擇淵灰鵐僖ぅ蕕肇螢鵐侫薀
凸素嘸喩棉測墜盟排灑般病ぢ及び LDFLAGS_SHLIB_EXPORT 参照)
        を手動で与えてやるか、最低限 Apache がオプションを推察できるように、
        Perl 5 インタプリタがどこにインストール
        されているかを指定する必要があります。</p>

        <p>Apache 1.3 での DSO サポートに関する、より細部の情報については
        htdocs/manual/dso.html の文書をよく読んでくだ世気ぁ
十分に注意しないで DSO 機構を使うと妙な副作用が発誓犬垢襪海箸△襪燭瓠
特に
        &quot;Advantages &amp; Disadvantages&quot; と名付けられた誓瓩
注意して読んでくだ世気ぁ７拗陲呂靴泙靴燭ー鹿粐鹿粲
取馨釈篏≪闔肅苺鱚釶辣就竢鈕蜃紜ぢソースツリーの誓瀋鹿畩鹿莖
腫ぢ次の段階は Apache ソースツリーを特定のプラットホームや
    個々の必要に合わせて誓瀋蠅靴泙后海寮設定で最も重要なことは後で
    Apache がインストールされる位置の決定です。というのは
    Apache が誓気靴虻遒垢襪燭瓩砲海琉銘屬帽腓錣擦得設定されるからです。
    他にも希望に応じて多くのオプションが有効です。</p>

    <p>どんなことが出来るのか簡単に感じてもらうため、ここでは
    標準的な例として、インストールツリーを /sw/pkg/apache,
    特定のコンパイラ及びフラグ、そして 2 つの追加モジュール mod_rewrite
    及び mod_proxy を後で DSO 機構によりロードさせるように Apache
    をコンパイルするものとします>。</p>
<pre>
     $ CC="pgcc" OPTIM="-O2" \
       ./configure --prefix=/usr/local/apache \
                   --enable-module=rewrite --enable-shared=rewrite \
                   --enable-module=proxy   --enable-shared=proxy
</pre>

    <p>有効なオプションの完全なリストは以下のコマンドを打ち込んでくだ世気ぁ
鹿霈
腫昭竢粤小闔肅苺鱚繻霄閼緇鹿霈

霈誓瀋衫磴離螢好箸竢粤紹伝塚溺竢鈕蜃綣閼緇
ぢファイルも見てくだ世気ぁ鹿霈

取馨釈篏≒趙釶辣就碯蛹笄ぢパッケージのビルド</a></h3>

    <p>これで Apache パッケージの各部分をコマンド</p>
<pre>
        $ make 
</pre>

    <p>を実行することによりビルドすることが出来ます。
    これには有効にしたモジュールの量にもよりますが Pentium-166/FreeBSD-2.2
    システムの場合で約 2 分かかります。じっと待ってくだ世気ぁ
鹿霈

取馨釈篏∫銖跛蜴腆瘢綵∫銖跛蜴腆ぢパッケージのインストール</a></h3>

    <p>インストールの <code>PREFIX</code> (上の <code>--prefix</code>
    オプション参照)誓瀋蠅砲茲螢僖奪院璽犬鬟ぅ鵐好函璽襪垢觧任后鹿霈
腫鱚轣諷銖跛
鹿頏緇

霈以下の例では <code>PREFIX</code> はそのまま &quot;PREFIX&quot;
   ではなく、<code>--prefix</code>
   オプションにより与えられた引数になります。</p>

<!-- Building and installing Apache in the traditional way -->

    <h2><a id="traditional" name="traditional">伝統的な方法によるビルドとインストール</a></h2>

    <p>APACI が出てくる以前は Apache のビルド及びインストールの方法は
    1 つしかありませんでした。APACI は
    人によってはよりわかりやすい誓瀋蠅離ぅ鵐拭璽侫А璽垢鯆鷆，靴泙垢
従来からの方法は大量のコマンドライン
    オプションを打ち込むことなくインストールの誓瀋蠅
出来る方法が用意されています。</p>

    <h3><a id="trad_configure" name="trad_configure">インストールの誓瀋鹿畩鹿莖
腫樵鞜竏のコンパイルは三段階で構誓気譴泙后
まずサーバに含めたい Apache <strong>モジュール</strong>
    を選択してくだ世気ぁ，法腕ぢに合わせた誓瀋蠅鬚靴泙后
最後にコンパイルをします。</p>

    <p>Apache の全ての誓瀋蠅蓮草痺蒹ぢ配布の <code>src</code>
    ディレクトリで行われます。このディレクトリに入ってくだ世気ぁ
鹿霈

種貍
殊蘊
若閼緇衷鈕蜃癆蜿郤閼緇ぢファイル <code>src/Configuration.tmpl</code> 
        の中で Apache
        にコンパイルするモジュールを選択します。実装したいオプションの
        モジュールの行のコメントを外すか (ファイルの終わりにある
        AddModule 行で) 、ダ瀬Ε鵐蹇璽匹靴燭蝓∈鄒成した追加のモジュールの
        新しい行を追加します (どのように Apache モジュールを作誓垢襪里についてのドキュメントは<a href="misc/api.html">API.html</a>
        を参照してくだ世気。
        あるモジュールが確実に必要でないことがわかっているならば、
        いくつかのデフォルトモジュールをコメントアウトすることができます
        (ただ世掘▲妊侫襯箸離皀献紂璽襪梁燭魯機璽个寮正確な操作と
        セキュリティにとって重要なので注意してくだ世気。


        <p><code>Rule</code>
        行のいくつかを誓瀋蠅垢詆廚△襪匹Δ鮹里襪燭瓩
若閼緇衷鈕蜃癆蜿郤閼緇ぢファイルの指示も読んでくだ世気ぁ鹿霈
鹿跚
殊蘊
草痺蒹ぢを OS に合わせて誓瀋蠅靴泙后Ｄ名錣呂燭誓
        <code>Configure</code> スクリプトを下記の例のように実行します。
        しかし、これが失敗するときや何か特殊な要求があるとき
        (<em>例えば</em>、追加したモジュールによって何らかのライブラリが
        必要な場合など) には <code>Configure</code>
        ファイルの次のオプションのいくつかを編集する必要があるかもしれません。 
        <code>EXTRA_CFLAGS, LIBS, LDFLAGS, INCLUDES</code>.


        <p><code>Configure</code> スクリプトを実行します</p>

        <blockquote>
<pre>
    % Configure
    Using 'Configuration' as config file
     + configured for &lt;whatever&gt; platform
     + setting C compiler to &lt;whatever&gt; *
     + setting C compiler optimization-level to &lt;whatever&gt; *
     + Adding selected modules
     + doing sanity check on compiler and options
    Creating Makefile in support
    Creating Makefile in main
    Creating Makefile in os/unix
    Creating Makefile in modules/standard

</pre>
        </blockquote>
        (*: 誓瀋蠧睛討肇轡好謄爐砲茲辰討蓮衷鈕蜃はこの通りに
        表示しないことがありますが、それで問題ありません。)

        <p>これで 3 の段階で使われる Makefile が誓言成されます。
        また、オプションのサポートプログラムをコンパイルするために、
        サポートディレクトリの中に Makefile が誓言成されます。</p>

        <p>(もし、様々な誓瀋蠅魎浜垢襪弔發蠅覆蕕弌
若閼緇衷鈕蜃綣閼緇ぢに <code>Configure -file
        Configuration.ai</code> のように、別の Configuration
        ファイルを読み込むようにオプションを付けるといいでしょう。)</p>
      </li>

    <h3><a id="trad_compile" name="trad_compile">Apache のコンパイル</a></h3>

      <li><code>make</code> を実行してくだ世気ぁ鹿跚鹿闌草痺蒹ぢ配布物にあるモジュールは Apache 開発グループによってテストが行われ、
    多くのメンバーによって日常的に使われているものです。
    メンバーやサードパーティによって開発された特定のニーズや機能をもつ
    追加モジュールは、&lt;<a
    href="http://www.apache.org/dist/httpd/contrib/modules/"
    >http://www.apache.org/dist/httpd/contrib/modules/</a>&gt;.
    から入手することができます。このページには、これらのモジュールを
    Apache コアコードにリンクさせるための誓睫誓が書いてあります。

    <h3><a id="trad_install" name="trad_install">Apache のインストール</a></h3>

    コンパイルを行うと、<code>httpd</code> というバイナリファイルが 
    <code>src</code> ディレクトリに作誓気譴泙后草痺蒹
のバイナリ配布はこのファイルを提供します。

    <p>次のステップはプログラムをインストールし、それを誓瀋蠅垢襪海箸任后
草痺蒹ぢはコンパイルされたディレクトリと同じディレクトリのセットで
    誓瀋蝓⊆孫圓気譴襪茲Δ砲覆辰討い泙后
もしどこか他のところから実行させたい場合は、ディレクトリを作誓掘
そこに <code>conf</code>, <code>logs</code> 及び <code>icons</code>
    ディレクトリをコピーしてくだ世気ぁ匹舛蕕両豺腓任癲
サーバルートのディレクトリのパーミッションをどう誓瀋蠅垢襪砲弔い董
釈鱚羹蜩祚黼笊鱸熹蜷鶤蔗迪ｓ纈鴪闖槇杖繝蜚情報</a>
    を読むべきです。</p>

    <p>次に、サーバの誓瀋螢侫．ぅ襪鯤埆犬靴泙后ぢつの誓瀋螢侫．ぅ襪首闔臂ディレクティブ</strong> を誓瀋蠅靴泙后Ｉ現狆屬任蓮
これらのファイルは <code>conf</code> ディレクトリに配置される、
    <code>srm.conf</code>, <code>access.conf</code>, <code>httpd.conf</code>
    です。誓瀋蠅了温佑砲覆襪茲Δ法柯曚竢粤障闔羲閼緇
ディレクトリに同じ内容のファイル、<code>srm.conf-dist</code>,
    <code>access.conf-dist</code>, <code>httpd.conf-dist</code>
    があります。<code>-dist</code> なしで、
    その名前のこれらのファイルをコピーするか、名前を変えてくだ世気ぁ
それからそれぞれのファイルを編集してくだ世気ぁ
それぞれのファイルにあるコメントを注意深く読んでくだ世気ぁ
これらのファイルの誓騎里弊設定に失敗すると、サーバが動かなくなったり、
    セキュリティ的に危険になったりします。
    <code>conf</code> ディレクトリには <code>mime.types</code>
    という追加ファイルがあります。
    通常このファイルを編集する必要はありません。</p>

    <p>最初に <code>httpd.conf</code> を編集してくだ世気ぁ
このファイルはサーバに関する一般的な属誓鮴設定します;
    ポート番号や起動ユーザ <em>等々</em>です。次に <code>srm.conf</code>
    ファイルを編集してくだ世気これはドキュメントツリーのルート、
    server-parsed HTML や内部的なイメージマップの解誓呂里茲Δ米段未糞’
弱躱等々</em> を誓瀋蠅靴泙后埜紊縫▲札垢亡悗垢覺靄椹爐
誓瀋蠅垢襪燭瓩窿纉鶤竢鈕ぢファイルを編集します。</p>

    <p>これら3つのファイルに加えて、サーバの動作はアクセスされた
    ディレクトリにある <code>.htaccess</code> ファイルを使うことによって、
    ディレクトリ毎に誓瀋蠅任泙后鹿霈


取馨サポートプログラムのコンパイル</h3>
    上記でコンパイル、誓瀋蠅気譴襯瓮ぅ鵑竢粤乗鞣鹿竢粤サーバの他に、Apache には多数のサポートプログラムが含まれています。
    これらは標準ではコンパイルされません。サポートプログラムは
    <code>support</code> ディレクトリにあります。
    サポートプログラムをコンパイルするには、このディレクトリに入り、
    以下のように入力してくだ世気ぁ
腫鱚轣諷
鹿頏緇

取仮釈篏♯纉鈑釶辣就齡蜴腆ぢパッケージのテスト</a></h2>

    <p>ここで、以下のコマンドを実行することで、Apache HTTP をすぐに
    実行できるようになっています。</p>
<pre>
        $ PREFIX/bin/apachectl start
</pre>

    <p>それから URL http://localhost/ (Apache を root としてあるいは
    --without-confadjust オプションを使ってビルド、インストールした場合)
    または http://localhost:8080/ (Apache を普通のユーザでビルド、
    インストールした場合) により最初の文書をリクエストできます。 
    それから以下によりサーバを止めてくだ世気ぁ鹿霈
腫鱚侑兎婦蜴鞜竏繝鹿頏緇

取仮釈篏♯蜊紜瘢綵♯蜊紜ぢ誓気靴ぅ轡好謄犹屬寮設定!</a></h2>
    <p>公開されるウェブサーバの適誓擇柄犧遒砲蓮挽墅
プロトコルの要素がその日の時間として示されるため、
    誓騎里併屬廚箸気譴泙后任垢蕁△海譴魑＿颪良においては
    NTP やなんらかの時間の同期を取るシステム、NT
    においても何かそれと同じ働きをするものを導入してくだ世気ぁ鹿霈

取

取瘡蜃扈杜堙劬樵鞜竏挽墅纈鮗馨
釈鱚羹〓昭蜊齟秉∫轣艱鶩蜴粤芍罌踉就侮粤昭
鹿硼糯鹿蔗迪

窺跫隻鉗瘡纐蜩蜿
誓


窺窺窺跫隻逅闥緕帯肬籬闔莱鯱帯
誓
